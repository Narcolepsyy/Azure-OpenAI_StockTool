# ============================================================================
# AI Stocks Assistant - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env with real credentials to version control
# ============================================================================

# ============================================================================
# AZURE OPENAI CONFIGURATION (Primary - Recommended)
# ============================================================================
# Azure OpenAI API credentials
AZURE_OPENAI_API_KEY=your_azure_openai_api_key_here
AZURE_OPENAI_ENDPOINT=https://your-resource-name.openai.azure.com
AZURE_OPENAI_API_VERSION=2024-08-01-preview

# Default Azure deployment (if not using specific deployments below)
AZURE_OPENAI_DEPLOYMENT=your_default_deployment_name

# Specific Azure OpenAI deployments (optional - for multiple models)
AZURE_OPENAI_DEPLOYMENT_OSS_120B=your_oss_120b_deployment_name
AZURE_OPENAI_DEPLOYMENT_4_1=your_gpt_4_1_deployment_name
AZURE_OPENAI_DEPLOYMENT_4_1_MINI=your_gpt_4_1_mini_deployment_name
AZURE_OPENAI_DEPLOYMENT_O3=your_o3_deployment_name
AZURE_OPENAI_DEPLOYMENT_GPT5=your_gpt5_deployment_name

# Azure OpenAI Embeddings (for RAG system)
AZURE_OPENAI_EMBEDDINGS_DEPLOYMENT=your_embeddings_deployment_name

# ============================================================================
# OPENAI CONFIGURATION (Alternative to Azure)
# ============================================================================
# Standard OpenAI API key (if not using Azure)
OPENAI_API_KEY=your_openai_api_key_here

# Optional: Custom OpenAI base URL (for proxies or compatible APIs)
# OPENAI_BASE_URL=https://api.openai.com/v1

# Default model for standard OpenAI
# OPENAI_MODEL=gpt-4o-mini

# Embeddings model for RAG (if using standard OpenAI)
# OPENAI_EMBEDDINGS_MODEL=text-embedding-3-small

# ============================================================================
# RAG (RETRIEVAL-AUGMENTED GENERATION) CONFIGURATION
# ============================================================================
# Enable/disable RAG system for knowledge base search
RAG_ENABLED=true

# Directories for RAG knowledge base and vector storage
KNOWLEDGE_DIR=knowledge
CHROMA_DIR=.chroma

# RAG chunking parameters
RAG_CHUNK_SIZE=1000
RAG_CHUNK_OVERLAP=200
RAG_MAX_CHUNKS=3
CHUNK_MAX_TOKENS=512

# ============================================================================
# EXTERNAL API KEYS (Optional - Enhances Features)
# ============================================================================
# Brave Search API (Recommended for high-quality web search)
BRAVE_API_KEY=your_brave_search_api_key_here

# Finnhub API (Real-time stock data and market insights)
FINNHUB_API_KEY=your_finnhub_api_key_here

# Alpha Vantage API (News & sentiment analysis - 25 requests/day free)
ALPHA_VANTAGE_API_KEY=your_alpha_vantage_api_key_here

# NewsAPI (Optional - for additional news sources)
NEWSAPI_API_KEY=your_newsapi_key_here

# ============================================================================
# CACHE CONFIGURATION (Performance Tuning)
# ============================================================================
# Stock quote cache
QUOTE_CACHE_SIZE=1024
QUOTE_TTL_SECONDS=60

# News cache
NEWS_CACHE_SIZE=1024
NEWS_TTL_SECONDS=300

# Article content cache
ARTICLE_CACHE_SIZE=2048
ARTICLE_TTL_SECONDS=3600

# Conversation cache
CONV_CACHE_SIZE=1000
CONV_TTL_SECONDS=14400

# Response caching
ENABLE_RESPONSE_CACHE=true
RESPONSE_CACHE_TTL=300
SIMPLE_QUERY_CACHE_TTL=60

# ============================================================================
# CONVERSATION MANAGEMENT (AI Memory)
# ============================================================================
# Maximum messages to keep in conversation history
MAX_CONV_MESSAGES=50

# Summarize conversation after this many messages
CONV_SUMMARY_THRESHOLD=20

# Maximum tokens per conversation turn
MAX_TOKENS_PER_TURN=6000

# Model to use for conversation summarization
SUMMARY_MODEL=gpt-4o-mini

# ============================================================================
# PERFORMANCE OPTIMIZATION
# ============================================================================
# Streaming configuration
STREAM_CHUNK_SIZE=64
MAX_STREAM_CHUNKS=500

# Tool execution
ENABLE_PARALLEL_TOOLS=true
TOOL_TIMEOUT=10

# Fast model for simple queries
FAST_MODEL_FOR_SIMPLE=gpt-4o-mini

# News/RAG concurrency
NEWS_FETCH_MAX_WORKERS=6
RAG_MAX_WORKERS=4
RAG_STRATEGY=symbol
RAG_MAX_PER_ITEM=3

# ============================================================================
# WEB SEARCH CONFIGURATION
# ============================================================================
# DuckDuckGo Search settings (free fallback)
DDGS_REGION=jp-jp
DDGS_SAFESEARCH=moderate
# DDGS_TIMELIMIT=m  # Optional: d (day), w (week), m (month), y (year)

# LangChain verbose mode (debugging)
# LANGCHAIN_VERBOSE=false

# ============================================================================
# FINANCIAL ANALYSIS CONFIGURATION
# ============================================================================
# Risk-free rate for financial calculations (e.g., 0.015 = 1.5%)
RISK_FREE_RATE=0.015

# News User-Agent (for web scraping)
NEWS_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36

# ============================================================================
# AWS CONFIGURATION (Optional - For Production Deployment)
# ============================================================================
# Set to true for LocalStack development, false for production AWS
USE_LOCALSTACK=false

# AWS endpoint (use http://localhost:4566 for LocalStack)
# AWS_ENDPOINT_URL=http://localhost:4566

# AWS credentials (use 'test' for LocalStack)
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key
AWS_DEFAULT_REGION=us-east-1

# S3 Configuration
S3_ENABLED=false
S3_BUCKET_NAME=stocktool-knowledge

# DynamoDB Configuration
DYNAMODB_ENABLED=false
DYNAMODB_TABLE_CONVERSATIONS=stocktool-conversations
DYNAMODB_TABLE_CACHE=stocktool-stock-cache

# SQS Configuration
SQS_ENABLED=false
SQS_QUEUE_ANALYSIS=stocktool-analysis-queue

# SNS Configuration
SNS_ENABLED=false
SNS_TOPIC_NOTIFICATIONS=stocktool-notifications

# CloudWatch Configuration
CLOUDWATCH_ENABLED=false
CLOUDWATCH_NAMESPACE=StockTool

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# Database URL (default: SQLite)
DATABASE_URL=sqlite:///./app.db

# For PostgreSQL (production):
# DATABASE_URL=postgresql://user:password@localhost:5432/stocktool

# For MySQL:
# DATABASE_URL=mysql://user:password@localhost:3306/stocktool

# ============================================================================
# AUTHENTICATION & SECURITY
# ============================================================================
# JWT secret key (CHANGE THIS IN PRODUCTION!)
JWT_SECRET=your_very_secure_random_secret_key_here_change_me

# JWT algorithm
JWT_ALG=HS256

# Token expiration times
ACCESS_TOKEN_EXPIRE_MINUTES=120
REFRESH_TOKEN_EXPIRE_DAYS=7

# Cookie configuration
REFRESH_COOKIE_NAME=refresh_token
COOKIE_SECURE=false
# COOKIE_DOMAIN=yourdomain.com

# Admin users (comma-separated usernames)
ADMIN_USERNAMES=admin

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
# Allowed frontend origins (use * for development, specific URLs for production)
FRONTEND_ORIGINS=*

# For production with specific domains:
# FRONTEND_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# ============================================================================
# MACHINE LEARNING CONFIGURATION (Stock Prediction)
# ============================================================================
# GPU/CPU settings
GPU_MEMORY_LIMIT_MB=3584
ENABLE_GPU_MEMORY_GROWTH=true
FORCE_CPU=false

# Training parameters
PREDICTION_BATCH_SIZE=32
PREDICTION_EPOCHS=50
PREDICTION_LEARNING_RATE=0.001
PREDICTION_EARLY_STOPPING_PATIENCE=10
PREDICTION_REDUCE_LR_PATIENCE=5

# Data split ratios
PREDICTION_TRAIN_SPLIT=0.8
PREDICTION_VAL_SPLIT=0.2

# ============================================================================
# DEVELOPMENT & DEBUGGING
# ============================================================================
# Set to 'development' or 'production'
# ENVIRONMENT=development

# Enable debug mode
# DEBUG=false

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
# LOG_LEVEL=INFO

# ============================================================================
# NOTES
# ============================================================================
# 1. REQUIRED: Either AZURE_OPENAI_* OR OPENAI_API_KEY must be set
# 2. RECOMMENDED: Set BRAVE_API_KEY for best web search quality
# 3. OPTIONAL: FINNHUB_API_KEY and ALPHA_VANTAGE_API_KEY enhance stock data
# 4. SECURITY: Change JWT_SECRET to a strong random value in production
# 5. PRODUCTION: Set COOKIE_SECURE=true and specify FRONTEND_ORIGINS
# 6. AWS: Leave AWS settings disabled unless deploying to AWS infrastructure
# 7. RAG: Requires either AZURE_OPENAI_EMBEDDINGS_DEPLOYMENT or OPENAI_API_KEY
# ============================================================================
